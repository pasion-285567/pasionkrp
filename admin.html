<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Kurt Raymund Blog</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.6;
            color: #2d3748;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }

        .admin-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .admin-header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .admin-header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .admin-container {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .admin-nav {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 0.8rem 1.5rem;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            color: #4a5568;
        }

        .nav-btn:hover {
            background: #667eea;
            color: white;
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .nav-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .admin-section {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
        }

        .admin-section.active {
            display: block;
        }

        .section-title {
            font-size: 2rem;
            color: #2d3748;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #4a5568;
        }

        .form-input {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }

        .file-upload {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .file-input {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .file-label {
            display: block;
            padding: 2rem;
            border: 2px dashed #cbd5e0;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f7fafc;
        }

        .file-label:hover {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.05);
        }

        .file-label.has-file {
            border-color: #48bb78;
            background: rgba(72, 187, 120, 0.05);
        }

        .image-preview {
            max-width: 200px;
            max-height: 200px;
            border-radius: 10px;
            margin: 1rem 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .btn {
            padding: 0.8rem 2rem;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }

        .btn-secondary:hover {
            background: #cbd5e0;
        }

        .btn-danger {
            background: #e53e3e;
            color: white;
        }

        .btn-danger:hover {
            background: #c53030;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(229, 62, 62, 0.3);
        }

        .btn-success {
            background: #48bb78;
            color: white;
        }

        .btn-success:hover {
            background: #38a169;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(72, 187, 120, 0.3);
        }

        .items-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .item-card {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 15px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .item-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .item-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 1rem;
        }

        .item-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 0.5rem;
        }

        .item-description {
            color: #718096;
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        .item-actions {
            display: flex;
            gap: 0.5rem;
        }

        .status-message {
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            display: none;
        }

        .status-success {
            background: rgba(72, 187, 120, 0.1);
            border: 1px solid #48bb78;
            color: #2f855a;
        }

        .status-error {
            background: rgba(229, 62, 62, 0.1);
            border: 1px solid #e53e3e;
            color: #c53030;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .albums-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .album-item {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 15px;
            padding: 1.5rem;
        }

        .album-photos {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .album-photo {
            position: relative;
            display: inline-block;
        }

        .album-photo img {
            width: 100%;
            height: 100px;
            object-fit: cover;
            border-radius: 8px;
        }

        .remove-photo-btn {
            position: absolute;
            top: -8px;
            right: -8px;
            width: 24px;
            height: 24px;
            background: #e53e3e;
            color: white;
            border: 2px solid white;
            border-radius: 50%;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .remove-photo-btn:hover {
            background: #c53030;
        }

        .add-photo-btn {
            width: 100px;
            height: 100px;
            border: 2px dashed #cbd5e0;
            border-radius: 8px;
            background: #f7fafc;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #4a5568;
            font-size: 24px;
            transition: all 0.3s ease;
        }

        .add-photo-btn:hover {
            border-color: #48bb78;
            background: rgba(72, 187, 120, 0.05);
            color: #48bb78;
        }

        .photo-input-hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .admin-container {
                padding: 0 1rem;
            }

            .admin-nav {
                flex-direction: column;
            }

            .nav-btn {
                text-align: center;
            }

            .items-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="admin-header">
        <h1>üéõÔ∏è Admin Dashboard</h1>
        <p>Manage your personal blog content</p>
    </div>
    <div class="admin-container">
        <div class="admin-nav">
            <button class="nav-btn active" onclick="showSection('profile')">üë§ Profile</button>
            <button class="nav-btn" onclick="showSection('albums')">üì∏ Albums</button>
            <button class="nav-btn" onclick="showSection('personal')">üñºÔ∏è Personal Photos</button>
            <button class="nav-btn" onclick="showSection('notes')">üìù Notes</button>
            <button class="nav-btn" onclick="showSection('videos')">üé• Videos</button>
            <button class="nav-btn" onclick="showSection('analytics')">üìä Analytics</button>
        </div>
        <div class="admin-section active" id="profile-section">
            <h2 class="section-title">üë§ Profile Management</h2>
            <div class="status-message" id="profile-status"></div>
            <form id="profile-form">
                <div class="form-group">
                    <label for="cover-photo">Cover Photo</label>
                    <div class="file-upload">
                        <input type="file" id="cover-photo" class="file-input" accept="image/*"
                            onchange="handleImageUpload(this, 'cover-preview')">
                        <label for="cover-photo" class="file-label" id="cover-label">
                            Click to upload cover photo (max 2MB - auto compressed)
                        </label>
                    </div>
                    <img id="cover-preview" class="image-preview" style="display: none;">
                </div>
                <div class="form-group">
                    <label for="profile-photo">Profile Picture</label>
                    <div class="file-upload">
                        <input type="file" id="profile-photo" class="file-input" accept="image/*"
                            onchange="handleImageUpload(this, 'profile-preview')">
                        <label for="profile-photo" class="file-label" id="profile-label">
                            Click to upload profile picture (max 2MB - auto compressed)
                        </label>
                    </div>
                    <img id="profile-preview" class="image-preview" style="display: none;">
                </div>
                <div class="form-group">
                    <label for="bio-title">Bio Title</label>
                    <input type="text" id="bio-title" class="form-input" placeholder="e.g., The Melodic Synthesist">
                </div>
                <div class="form-group">
                    <label for="bio-content">Bio Content</label>
                    <textarea id="bio-content" class="form-input form-textarea"
                        placeholder="Write your bio here..."></textarea>
                </div>
                <button type="submit" class="btn btn-primary">
                    <span class="loading" id="profile-loading" style="display: none;"></span>
                    üíæ Save Profile
                </button>
            </form>
        </div>
        <div class="admin-section" id="albums-section">
            <h2 class="section-title">üì∏ Album Management</h2>
            <div class="status-message" id="albums-status"></div>
            <form id="album-form">
                <div class="form-group">
                    <label for="album-title">Album Title</label>
                    <input type="text" id="album-title" class="form-input" placeholder="e.g., Wedding Collection"
                        required>
                </div>
                <div class="form-group">
                    <label>Album Photos</label>
                    <div class="album-photos" id="album-photos-container">
                        <div class="add-photo-btn" onclick="triggerPhotoUpload()">
                            +
                        </div>
                    </div>
                    <input type="file" id="hidden-photo-input" class="photo-input-hidden" accept="image/*" multiple
                        onchange="handleAlbumPhotoUpload(this)">
                </div>
                <button type="submit" class="btn btn-primary">
                    <span class="loading" id="album-loading" style="display: none;"></span>
                    üìÅ Create Album
                </button>
            </form>
            <div id="albums-list" class="albums-list"></div>
        </div>
        <div class="admin-section" id="personal-section">
            <h2 class="section-title">üñºÔ∏è Personal Photos Management</h2>
            <div class="status-message" id="personal-status"></div>
            <form id="personal-form">
                <div class="form-group">
                    <label for="personal-image">Photo Image</label>
                    <div class="file-upload">
                        <input type="file" id="personal-image" class="file-input" accept="image/*"
                            onchange="handleImageUpload(this, 'personal-image-preview')" required>
                        <label for="personal-image" class="file-label" id="personal-image-label">
                            üì∑ Click to upload photo (max 5MB - auto compressed)
                        </label>
                    </div>
                    <img id="personal-image-preview" class="image-preview" style="display: none;">
                </div>
                <div class="form-group">
                    <label for="personal-title">Photo Title</label>
                    <input type="text" id="personal-title" class="form-input" placeholder="e.g., Wedding Reception"
                        required>
                </div>
                <div class="form-group">
                    <label for="personal-description">Photo Description</label>
                    <textarea id="personal-description" class="form-input form-textarea"
                        placeholder="Brief description of the photo..." required></textarea>
                </div>
                <button type="submit" class="btn btn-primary">
                    <span class="loading" id="personal-loading" style="display: none;"></span>
                    üñºÔ∏è Add Photo
                </button>
            </form>
            <div id="personal-photos-grid" class="items-grid"></div>
        </div>
        <div class="admin-section" id="notes-section">
            <h2 class="section-title">üìù Notes Management</h2>
            <div class="status-message" id="notes-status"></div>
            <form id="notes-form">
                <div class="form-group">
                    <label for="note-title">Note Title</label>
                    <input type="text" id="note-title" class="form-input" placeholder="e.g., Thoughts on Development"
                        required>
                </div>
                <div class="form-group">
                    <label for="note-date">Date</label>
                    <input type="date" id="note-date" class="form-input" required>
                </div>
                <div class="form-group">
                    <label for="note-content">Note Content</label>
                    <textarea id="note-content" class="form-input form-textarea" placeholder="Write your note here..."
                        required></textarea>
                </div>
                <button type="submit" class="btn btn-primary">
                    <span class="loading" id="notes-loading" style="display: none;"></span>
                    üìù Save Note
                </button>
            </form>
            <div id="notes-grid" class="items-grid"></div>
        </div>
        <div class="admin-section" id="videos-section">
            <h2 class="section-title">üé• Videos Management</h2>
            <div class="status-message" id="videos-status"></div>
            <form id="videos-form">
                <div class="form-group">
                    <label for="video-title">Video Title</label>
                    <input type="text" id="video-title" class="form-input" placeholder="e.g., My Wedding Highlights"
                        required>
                </div>
                <div class="form-group">
                    <label for="video-path">Video File Path</label>
                    <input type="text" id="video-path" class="form-input" placeholder="e.g., videos/wedding.mp4"
                        required>
                    <small style="color: #718096; font-size: 0.9rem; margin-top: 0.5rem; display: block;">
                        Enter the relative path to your video file (e.g., videos/filename.mp4)
                    </small>
                </div>
                <div class="form-group">
                    <label for="video-thumbnail">Video Thumbnail (Optional)</label>
                    <div class="file-upload">
                        <input type="file" id="video-thumbnail" class="file-input" accept="image/*"
                            onchange="handleImageUpload(this, 'video-thumbnail-preview')">
                        <label for="video-thumbnail" class="file-label" id="video-thumbnail-label">
                            üñºÔ∏è Click to upload thumbnail (max 2MB - auto compressed)
                        </label>
                    </div>
                    <img id="video-thumbnail-preview" class="image-preview" style="display: none;">
                    <small style="color: #718096; font-size: 0.9rem; margin-top: 0.5rem; display: block;">
                        If no thumbnail is provided, a default video icon will be used
                    </small>
                </div>
                <div class="form-group">
                    <label for="video-description">Video Description</label>
                    <textarea id="video-description" class="form-input form-textarea"
                        placeholder="Brief description of the video..." required></textarea>
                </div>
                <button type="submit" class="btn btn-primary">
                    <span class="loading" id="videos-loading" style="display: none;"></span>
                    üé• Add Video
                </button>
            </form>
            <div id="videos-grid" class="items-grid"></div>
        </div>

        <div class="admin-section" id="analytics-section">
            <h2 class="section-title">üìä Website Analytics</h2>
            <div class="stats-grid"
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                <div class="stat-card"
                    style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 2rem; border-radius: 15px; text-align: center;">
                    <div style="font-size: 2.5rem; font-weight: bold; margin-bottom: 0.5rem;" id="totalViews">-</div>
                    <div>Total Page Views</div>
                </div>
                <div class="stat-card"
                    style="background: linear-gradient(135deg, #48bb78, #38a169); color: white; padding: 2rem; border-radius: 15px; text-align: center;">
                    <div style="font-size: 2.5rem; font-weight: bold; margin-bottom: 0.5rem;" id="todayVisitors">-</div>
                    <div>Today's Visitors</div>
                </div>
                <div class="stat-card"
                    style="background: linear-gradient(135deg, #ed8936, #dd6b20); color: white; padding: 2rem; border-radius: 15px; text-align: center;">
                    <div style="font-size: 2.5rem; font-weight: bold; margin-bottom: 0.5rem;" id="thisWeekVisitors">-
                    </div>
                    <div>This Week</div>
                </div>
            </div>
            <div style="background: white; padding: 2rem; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                <h3>Recent Daily Stats</h3>
                <div id="dailyStatsList" style="margin-top: 1rem;">Loading...</div>
            </div>
        </div>
    </div>
    <script type="module">

        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js';
        import { getFirestore, collection, addDoc, getDocs, doc, updateDoc, deleteDoc, setDoc, getDoc, increment, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js';


        const firebaseConfig = {
            apiKey: "AIzaSyAMWLEC6YcTnx53CXZReR7E67-SIJCzBwI",
            authDomain: "bro-raymund.firebaseapp.com",
            databaseURL: "https://bro-raymund-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "bro-raymund",
            storageBucket: "bro-raymund.firebasestorage.app",
            messagingSenderId: "415894158344",
            appId: "1:415894158344:web:20c3298dce4c4235b5e5bd",
            measurementId: "G-9YCPZ7BJSH"
        };


        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);


        window.db = db;
        window.firestore = { collection, addDoc, getDocs, doc, updateDoc, deleteDoc, setDoc, getDoc, increment, serverTimestamp };
        console.log('Firebase initialized successfully');


        setTimeout(() => {

            loadProfileData();
        }, 100);
    </script>
    <script>

        let currentAlbumPhotos = [];


        function showSection(sectionName) {

            document.querySelectorAll('.admin-section').forEach(section => {
                section.classList.remove('active');
            });

            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            document.getElementById(sectionName + '-section').classList.add('active');

            event.target.classList.add('active');

            loadSectionData(sectionName);
        }


        async function loadSectionData(sectionName) {
            switch (sectionName) {
                case 'profile':
                    await loadProfileData();
                    break;
                case 'albums':
                    await loadAlbumsData();
                    break;
                case 'personal':
                    await loadPersonalPhotos();
                    break;
                case 'notes':
                    await loadNotesData();
                    break;

                case 'analytics':
                    await loadAnalyticsData();
                    break;
            }
        }


        function handleImageUpload(input, previewId) {
            const file = input.files[0];
            if (!file) return;


            if (file.size > 2 * 1024 * 1024) {
                alert('Image is too large! Please select an image smaller than 2MB.');
                input.value = '';
                return;
            }

            const label = document.querySelector(`label[for="${input.id}"]`);
            const preview = document.getElementById(previewId);
            label.innerHTML = 'Processing image...';


            const reader = new FileReader();
            reader.onload = function (e) {
                const img = new Image();
                img.onload = function () {

                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');


                    let { width, height } = img;
                    const maxSize = 800;
                    if (width > height && width > maxSize) {
                        height = (height * maxSize) / width;
                        width = maxSize;
                    } else if (height > maxSize) {
                        width = (width * maxSize) / height;
                        height = maxSize;
                    }

                    canvas.width = width;
                    canvas.height = height;


                    ctx.drawImage(img, 0, 0, width, height);


                    const compressedDataUrl = canvas.toDataURL('image/jpeg', 0.7);


                    preview.src = compressedDataUrl;
                    preview.style.display = 'block';


                    const sizeKB = Math.round(compressedDataUrl.length / 1024);
                    label.classList.add('has-file');
                    label.innerHTML = `${file.name} (${sizeKB}KB) - Ready`;

                    console.log(`Image processed: ${file.name}, compressed to ${sizeKB}KB`);
                };
                img.src = e.target.result;
            };

            reader.onerror = function () {
                label.innerHTML = 'Error reading file. Please try again.';
                console.error('Error reading file');
            };

            reader.readAsDataURL(file);
        }


        function triggerPhotoUpload() {
            document.getElementById('hidden-photo-input').click();
        }


        function handleAlbumPhotoUpload(input) {
            const files = Array.from(input.files);
            if (files.length === 0) return;

            files.forEach(file => {
                if (file.size > 2 * 1024 * 1024) {
                    console.warn(`Skipping large file: ${file.name}`);
                    return;
                }

                const reader = new FileReader();
                reader.onload = function (e) {
                    const img = new Image();
                    img.onload = function () {

                        const canvas = document.createElement('canvas');
                        const ctx = canvas.getContext('2d');
                        let { width, height } = img;
                        const maxSize = 800;
                        if (width > height && width > maxSize) {
                            height = (height * maxSize) / width;
                            width = maxSize;
                        } else if (height > maxSize) {
                            width = (width * maxSize) / height;
                            height = maxSize;
                        }

                        canvas.width = width;
                        canvas.height = height;
                        ctx.drawImage(img, 0, 0, width, height);
                        const compressedDataUrl = canvas.toDataURL('image/jpeg', 0.8);


                        currentAlbumPhotos.push(compressedDataUrl);


                        addPhotoToDisplay(compressedDataUrl, file.name);
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(file);
            });


            input.value = '';
        }


        function addPhotoToDisplay(src, filename) {
            const container = document.getElementById('album-photos-container');
            const addBtn = container.querySelector('.add-photo-btn');

            const photoDiv = document.createElement('div');
            photoDiv.className = 'album-photo';

            const img = document.createElement('img');
            img.src = src;
            img.title = filename;

            const removeBtn = document.createElement('div');
            removeBtn.className = 'remove-photo-btn';
            removeBtn.innerHTML = '‚àí';
            removeBtn.onclick = () => removePhotoFromDisplay(photoDiv, src);

            photoDiv.appendChild(img);
            photoDiv.appendChild(removeBtn);


            container.insertBefore(photoDiv, addBtn);
        }


        function removePhotoFromDisplay(photoDiv, src) {

            const index = currentAlbumPhotos.indexOf(src);
            if (index > -1) {
                currentAlbumPhotos.splice(index, 1);
            }


            photoDiv.remove();
        }


        function fileToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result);
                reader.onerror = error => reject(error);
            });
        }


        function showStatus(sectionId, message, isError = false) {
            const statusDiv = document.getElementById(sectionId);
            statusDiv.textContent = message;
            statusDiv.className = `status-message ${isError ? 'status-error' : 'status-success'}`;
            statusDiv.style.display = 'block';
            setTimeout(() => {
                statusDiv.style.display = 'none';
            }, 5000);
        }


        async function loadProfileData() {
            try {
                const querySnapshot = await window.firestore.getDocs(window.firestore.collection(window.db, 'profile'));
                if (!querySnapshot.empty) {
                    const profileData = querySnapshot.docs[0].data();


                    if (profileData.coverPhoto) {
                        document.getElementById('cover-preview').src = profileData.coverPhoto;
                        document.getElementById('cover-preview').style.display = 'block';
                        document.getElementById('cover-label').classList.add('has-file');
                        document.getElementById('cover-label').innerHTML = '‚úÖ Cover photo loaded';
                    }

                    if (profileData.profilePhoto) {
                        document.getElementById('profile-preview').src = profileData.profilePhoto;
                        document.getElementById('profile-preview').style.display = 'block';
                        document.getElementById('profile-label').classList.add('has-file');
                        document.getElementById('profile-label').innerHTML = '‚úÖ Profile photo loaded';
                    }

                    document.getElementById('bio-title').value = profileData.bioTitle || '';
                    document.getElementById('bio-content').value = profileData.bioContent || '';
                }
            } catch (error) {
                console.error('Error loading profile:', error);
            }
        }

        document.getElementById('profile-form').addEventListener('submit', async function (e) {
            e.preventDefault();
            const loading = document.getElementById('profile-loading');
            loading.style.display = 'inline-block';

            try {

                const querySnapshot = await window.firestore.getDocs(window.firestore.collection(window.db, 'profile'));
                let currentData = {};
                if (!querySnapshot.empty) {
                    currentData = querySnapshot.docs[0].data();
                }


                const profileData = {
                    ...currentData, // Keep existing data
                    bioTitle: document.getElementById('bio-title').value,
                    bioContent: document.getElementById('bio-content').value,
                    updatedAt: new Date()
                };


                const coverPreview = document.getElementById('cover-preview');
                if (coverPreview.src && coverPreview.src.startsWith('data:')) {
                    profileData.coverPhoto = coverPreview.src;
                    console.log('Saving cover photo, size:', Math.round(coverPreview.src.length / 1024), 'KB');
                }


                const profilePreview = document.getElementById('profile-preview');
                if (profilePreview.src && profilePreview.src.startsWith('data:')) {
                    profileData.profilePhoto = profilePreview.src;
                    console.log('Saving profile photo, size:', Math.round(profilePreview.src.length / 1024), 'KB');
                }

                console.log('Saving profile data:', Object.keys(profileData));


                await window.firestore.setDoc(window.firestore.doc(window.db, 'profile', 'main'), profileData);
                showStatus('profile-status', 'Profile updated successfully!');


                document.getElementById('cover-photo').value = '';
                document.getElementById('profile-photo').value = '';
            } catch (error) {
                console.error('Error saving profile:', error);
                showStatus('profile-status', 'Error saving profile: ' + error.message, true);
            }

            loading.style.display = 'none';
        });


        async function loadAlbumsData() {
            try {
                const querySnapshot = await window.firestore.getDocs(window.firestore.collection(window.db, 'albums'));
                const albumsList = document.getElementById('albums-list');
                albumsList.innerHTML = '';

                querySnapshot.forEach((doc) => {
                    const album = doc.data();
                    const albumElement = createAlbumElement(doc.id, album);
                    albumsList.appendChild(albumElement);
                });
            } catch (error) {
                console.error('Error loading albums:', error);
            }
        }

        function createAlbumElement(id, album) {
            const albumDiv = document.createElement('div');
            albumDiv.className = 'album-item';

            albumDiv.innerHTML = `
 <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
 <h3 class="item-title">${album.title}</h3>
 <div style="display: flex; gap: 0.5rem;">
 <button class="btn btn-secondary" onclick="editAlbum('${id}')">Edit</button>
 <button class="btn btn-danger" onclick="deleteAlbum('${id}')">Delete</button>
 </div>
 </div>
 <p><strong>Photos:</strong> ${album.photos ? album.photos.length : 0}</p>
 `;

            return albumDiv;
        }


        window.editAlbum = async function (id) {
            try {
                const docRef = window.firestore.doc(window.db, 'albums', id);
                const docSnap = await window.firestore.getDocs(window.firestore.collection(window.db, 'albums'));
                let albumData = null;

                docSnap.forEach((doc) => {
                    if (doc.id === id) {
                        albumData = doc.data();
                    }
                });

                if (albumData) {

                    document.getElementById('album-title').value = albumData.title;
                    currentAlbumPhotos = [...albumData.photos]; // Copy existing photos


                    const container = document.getElementById('album-photos-container');
                    container.innerHTML = '';


                    albumData.photos.forEach(photo => {
                        addPhotoToDisplay(photo, 'Existing Photo');
                    });


                    const addBtn = document.createElement('div');
                    addBtn.className = 'add-photo-btn';
                    addBtn.innerHTML = '+';
                    addBtn.onclick = triggerPhotoUpload;
                    container.appendChild(addBtn);


                    document.getElementById('album-form').dataset.editId = id;


                    document.getElementById('album-form').scrollIntoView({ behavior: 'smooth' });
                }
            } catch (error) {
                console.error('Error loading album for edit:', error);
                alert('Error loading album. Please try again.');
            }
        };

        document.getElementById('album-form').addEventListener('submit', async function (e) {
            e.preventDefault();
            const loading = document.getElementById('album-loading');
            loading.style.display = 'inline-block';

            try {
                if (currentAlbumPhotos.length === 0) {
                    alert('Please add at least one photo to the album.');
                    loading.style.display = 'none';
                    return;
                }

                const albumData = {
                    title: document.getElementById('album-title').value,
                    photos: currentAlbumPhotos,
                    createdAt: new Date()
                };

                const editId = document.getElementById('album-form').dataset.editId;
                if (editId) {

                    await window.firestore.updateDoc(window.firestore.doc(window.db, 'albums', editId), albumData);
                    showStatus('albums-status', 'Album updated successfully!');
                    delete document.getElementById('album-form').dataset.editId;
                } else {

                    await window.firestore.addDoc(window.firestore.collection(window.db, 'albums'), albumData);
                    showStatus('albums-status', 'Album created successfully!');
                }


                document.getElementById('album-form').reset();
                document.getElementById('album-photos-container').innerHTML = '<div class="add-photo-btn" onclick="triggerPhotoUpload()">+</div>';
                currentAlbumPhotos = [];


                await loadAlbumsData();
            } catch (error) {
                console.error('Error saving album:', error);
                showStatus('albums-status', 'Error saving album. Please try again.', true);
            }

            loading.style.display = 'none';
        });


        async function loadPersonalPhotos() {
            try {
                const querySnapshot = await window.firestore.getDocs(window.firestore.collection(window.db, 'personalPhotos'));
                const photosGrid = document.getElementById('personal-photos-grid');
                photosGrid.innerHTML = '';

                querySnapshot.forEach((doc) => {
                    const photo = doc.data();
                    const photoElement = createPersonalPhotoElement(doc.id, photo);
                    photosGrid.appendChild(photoElement);
                });
            } catch (error) {
                console.error('Error loading personal photos:', error);
            }
        }

        function createPersonalPhotoElement(id, photo) {
            const photoDiv = document.createElement('div');
            photoDiv.className = 'item-card';
            photoDiv.innerHTML = `
 <img src="${photo.image}" alt="${photo.title}" class="item-image">
 <h3 class="item-title">${photo.title}</h3>
 <p class="item-description">${photo.description}</p>
 <div class="item-actions">
 <button class="btn btn-danger" onclick="deletePersonalPhoto('${id}')">üóëÔ∏è Delete</button>
 </div>
 `;

            return photoDiv;
        }

        document.getElementById('personal-form').addEventListener('submit', async function (e) {
            e.preventDefault();
            const loading = document.getElementById('personal-loading');
            loading.style.display = 'inline-block';

            try {
                const photoData = {
                    title: document.getElementById('personal-title').value,
                    description: document.getElementById('personal-description').value,
                    image: document.getElementById('personal-image-preview').src,
                    createdAt: new Date()
                };

                await window.firestore.addDoc(window.firestore.collection(window.db, 'personalPhotos'), photoData);
                showStatus('personal-status', '‚úÖ Photo added successfully!');


                document.getElementById('personal-form').reset();
                document.getElementById('personal-image-preview').style.display = 'none';
                document.getElementById('personal-image-label').classList.remove('has-file');
                document.getElementById('personal-image-label').innerHTML = 'üì∑ Click to upload photo (max 5MB - auto compressed)';


                await loadPersonalPhotos();
            } catch (error) {
                console.error('Error adding photo:', error);
                showStatus('personal-status', '‚ùå Error adding photo. Please try again.', true);
            }

            loading.style.display = 'none';
        });


        async function loadNotesData() {
            try {
                const querySnapshot = await window.firestore.getDocs(window.firestore.collection(window.db, 'notes'));
                const notesGrid = document.getElementById('notes-grid');
                notesGrid.innerHTML = '';

                querySnapshot.forEach((doc) => {
                    const note = doc.data();
                    const noteElement = createNoteElement(doc.id, note);
                    notesGrid.appendChild(noteElement);
                });
            } catch (error) {
                console.error('Error loading notes:', error);
            }
        }

        function createNoteElement(id, note) {
            const noteDiv = document.createElement('div');
            noteDiv.className = 'item-card';
            const date = new Date(note.date).toLocaleDateString();


            let previewText = note.content.substring(0, 150);
            if (note.content.length > 150) {
                previewText += '...';
            }

            previewText = previewText.replace(/\n+/g, ' ').replace(/\s+/g, ' ').trim();

            noteDiv.innerHTML = `
 <h3 class="item-title">${escapeHtml(note.title)}</h3>
 <p style="color: #718096; font-size: 0.9rem; margin-bottom: 1rem;">${date}</p>
 <p class="item-description">${escapeHtml(previewText)}</p>
 <div class="item-actions">
 <button class="btn btn-secondary" onclick="editNote('${id}', \`${escapeForJS(note.title)}\`, '${note.date}', \`${escapeForJS(note.content)}\`)">Edit</button>
 <button class="btn btn-danger" onclick="deleteNote('${id}')">Delete</button>
 </div>
 `;

            return noteDiv;
        }


        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function escapeForJS(text) {
            return text.replace(/`/g, '\\`').replace(/\n/g, '\\n').replace(/\r/g, '\\r');
        }

        document.getElementById('notes-form').addEventListener('submit', async function (e) {
            e.preventDefault();
            const loading = document.getElementById('notes-loading');
            loading.style.display = 'inline-block';

            try {
                const noteData = {
                    title: document.getElementById('note-title').value,
                    date: document.getElementById('note-date').value,
                    content: document.getElementById('note-content').value,
                    createdAt: new Date()
                };

                const editId = document.getElementById('notes-form').dataset.editId;
                if (editId) {

                    await window.firestore.updateDoc(window.firestore.doc(window.db, 'notes', editId), noteData);
                    showStatus('notes-status', '‚úÖ Note updated successfully!');
                    delete document.getElementById('notes-form').dataset.editId;
                } else {

                    await window.firestore.addDoc(window.firestore.collection(window.db, 'notes'), noteData);
                    showStatus('notes-status', '‚úÖ Note saved successfully!');
                }


                document.getElementById('notes-form').reset();


                await loadNotesData();
            } catch (error) {
                console.error('Error saving note:', error);
                showStatus('notes-status', '‚ùå Error saving note. Please try again.', true);
            }

            loading.style.display = 'none';
        });


        window.deleteAlbum = async function (id) {
            if (confirm('Are you sure you want to delete this album?')) {
                try {
                    await window.firestore.deleteDoc(window.firestore.doc(window.db, 'albums', id));
                    showStatus('albums-status', '‚úÖ Album deleted successfully!');
                    await loadAlbumsData();
                } catch (error) {
                    console.error('Error deleting album:', error);
                    showStatus('albums-status', '‚ùå Error deleting album.', true);
                }
            }
        };

        window.deletePersonalPhoto = async function (id) {
            if (confirm('Are you sure you want to delete this photo?')) {
                try {
                    await window.firestore.deleteDoc(window.firestore.doc(window.db, 'personalPhotos', id));
                    showStatus('personal-status', '‚úÖ Photo deleted successfully!');
                    await loadPersonalPhotos();
                } catch (error) {
                    console.error('Error deleting photo:', error);
                    showStatus('personal-status', '‚ùå Error deleting photo.', true);
                }
            }
        };

        window.deleteNote = async function (id) {
            if (confirm('Are you sure you want to delete this note?')) {
                try {
                    await window.firestore.deleteDoc(window.firestore.doc(window.db, 'notes', id));
                    showStatus('notes-status', '‚úÖ Note deleted successfully!');
                    await loadNotesData();
                } catch (error) {
                    console.error('Error deleting note:', error);
                    showStatus('notes-status', '‚ùå Error deleting note.', true);
                }
            }
        };


        window.editNote = function (id, title, date, content) {
            document.getElementById('note-title').value = title;
            document.getElementById('note-date').value = date;
            document.getElementById('note-content').value = content;
            document.getElementById('notes-form').dataset.editId = id;


            document.getElementById('notes-form').scrollIntoView({ behavior: 'smooth' });
        };


        document.addEventListener('DOMContentLoaded', function () {

            document.getElementById('note-date').value = new Date().toISOString().split('T')[0];


            setTimeout(() => {
                loadProfileData();
            }, 200);
        });


        function resetFileInput(inputId, labelId, previewId) {
            document.getElementById(inputId).value = '';
            document.getElementById(labelId).classList.remove('has-file');
            document.getElementById(previewId).style.display = 'none';
        }


        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }


        function compressImage(file, maxWidth = 1200, quality = 0.8) {
            return new Promise((resolve) => {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                const img = new Image();

                img.onload = function () {
                    const ratio = Math.min(maxWidth / img.width, maxWidth / img.height);
                    canvas.width = img.width * ratio;
                    canvas.height = img.height * ratio;

                    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                    canvas.toBlob(resolve, 'image/jpeg', quality);
                };

                img.src = URL.createObjectURL(file);
            });
        }


        async function handleImageUploadWithCompression(input, previewId, maxWidth = 1200) {
            const file = input.files[0];
            if (file) {
                try {

                    const label = document.querySelector(`label[for="${input.id}"]`);
                    label.innerHTML = '‚è≥ Processing image...';


                    let processedFile = file;
                    if (file.size > 500000) { // 500KB
                        processedFile = await compressImage(file, maxWidth);
                    }

                    const reader = new FileReader();
                    reader.onload = function (e) {
                        const preview = document.getElementById(previewId);
                        preview.src = e.target.result;
                        preview.style.display = 'block';


                        label.classList.add('has-file');
                        const size = formatFileSize(processedFile.size || file.size);
                        label.innerHTML = `‚úÖ ${file.name} (${size}) - Ready to upload`;
                    };

                    reader.readAsDataURL(processedFile);
                } catch (error) {
                    console.error('Error processing image:', error);
                    const label = document.querySelector(`label[for="${input.id}"]`);
                    label.innerHTML = '‚ùå Error processing image. Please try again.';
                }
            }
        }


        window.exportData = async function () {
            try {
                const data = {
                    profile: {},
                    albums: [],
                    personalPhotos: [],
                    notes: []
                };


                const profileSnapshot = await window.firestore.getDocs(window.firestore.collection(window.db, 'profile'));
                if (!profileSnapshot.empty) {
                    data.profile = profileSnapshot.docs[0].data();
                }


                const albumsSnapshot = await window.firestore.getDocs(window.firestore.collection(window.db, 'albums'));
                albumsSnapshot.forEach(doc => {
                    data.albums.push({ id: doc.id, ...doc.data() });
                });


                const photosSnapshot = await window.firestore.getDocs(window.firestore.collection(window.db, 'personalPhotos'));
                photosSnapshot.forEach(doc => {
                    data.personalPhotos.push({ id: doc.id, ...doc.data() });
                });


                const notesSnapshot = await window.firestore.getDocs(window.firestore.collection(window.db, 'notes'));
                notesSnapshot.forEach(doc => {
                    data.notes.push({ id: doc.id, ...doc.data() });
                });


                const dataStr = JSON.stringify(data, null, 2);
                const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);
                const exportFileDefaultName = `kurt-blog-backup-${new Date().toISOString().split('T')[0]}.json`;

                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', exportFileDefaultName);
                linkElement.click();
            } catch (error) {
                console.error('Error exporting data:', error);
                alert('Error exporting data. Please try again.');
            }
        };


        document.addEventListener('DOMContentLoaded', function () {
            const header = document.querySelector('.admin-header');
            const exportBtn = document.createElement('button');
            exportBtn.innerHTML = 'üíæ Export Data';
            exportBtn.className = 'btn btn-secondary';
            exportBtn.style.position = 'absolute';
            exportBtn.style.top = '2rem';
            exportBtn.style.right = '2rem';
            exportBtn.onclick = exportData;
            header.style.position = 'relative';
            header.appendChild(exportBtn);
        });









        async function loadVideosData() {
            try {
                const querySnapshot = await window.firestore.getDocs(window.firestore.collection(window.db, 'videos'));
                const videosGrid = document.getElementById('videos-grid');
                videosGrid.innerHTML = '';

                querySnapshot.forEach((doc) => {
                    const video = doc.data();
                    const videoElement = createVideoAdminElement(doc.id, video);
                    videosGrid.appendChild(videoElement);
                });
            } catch (error) {
                console.error('Error loading videos:', error);
            }
        }

        function createVideoAdminElement(id, video) {
            const videoDiv = document.createElement('div');
            videoDiv.className = 'item-card';


            const thumbnailSrc = video.thumbnail || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEyMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEyMCIgZmlsbD0iI2UyZThmMCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM3MTgwOTYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj7wn5O5IFZpZGVvPC90ZXh0Pjwvc3ZnPg==';

            videoDiv.innerHTML = `
        <div style="position: relative;">
            <img src="${thumbnailSrc}" alt="${video.title}" class="item-image">
            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.7); border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem;">
                ‚ñ∂
            </div>
        </div>
        <h3 class="item-title">${video.title}</h3>
        <p style="color: #718096; font-size: 0.9rem; margin-bottom: 0.5rem;"><strong>Path:</strong> ${video.videoPath}</p>
        <p class="item-description">${video.description}</p>
        <div class="item-actions">
            <button class="btn btn-secondary" onclick="editVideo('${id}')">Edit</button>
            <button class="btn btn-danger" onclick="deleteVideo('${id}')">Delete</button>
        </div>
    `;

            return videoDiv;
        }
        
        document.getElementById('videos-form').addEventListener('submit', async function (e) {
            e.preventDefault();
            const loading = document.getElementById('videos-loading');
            loading.style.display = 'inline-block';

            try {
                const videoData = {
                    title: document.getElementById('video-title').value,
                    videoPath: document.getElementById('video-path').value,
                    description: document.getElementById('video-description').value,
                    createdAt: new Date()
                };


                const thumbnailPreview = document.getElementById('video-thumbnail-preview');
                if (thumbnailPreview.src && thumbnailPreview.src.startsWith('data:')) {
                    videoData.thumbnail = thumbnailPreview.src;
                }

                const editId = document.getElementById('videos-form').dataset.editId;
                if (editId) {

                    await window.firestore.updateDoc(window.firestore.doc(window.db, 'videos', editId), videoData);
                    showStatus('videos-status', 'Video updated successfully!');
                    delete document.getElementById('videos-form').dataset.editId;
                } else {

                    await window.firestore.addDoc(window.firestore.collection(window.db, 'videos'), videoData);
                    showStatus('videos-status', 'Video added successfully!');
                }


                document.getElementById('videos-form').reset();
                document.getElementById('video-thumbnail-preview').style.display = 'none';
                document.getElementById('video-thumbnail-label').classList.remove('has-file');
                document.getElementById('video-thumbnail-label').innerHTML = 'üñºÔ∏è Click to upload thumbnail (max 2MB - auto compressed)';


                await loadVideosData();
            } catch (error) {
                console.error('Error saving video:', error);
                showStatus('videos-status', 'Error saving video. Please try again.', true);
            }

            loading.style.display = 'none';
        });


        window.editVideo = async function (id) {
            try {
                const docSnap = await window.firestore.getDocs(window.firestore.collection(window.db, 'videos'));
                let videoData = null;

                docSnap.forEach((doc) => {
                    if (doc.id === id) {
                        videoData = doc.data();
                    }
                });

                if (videoData) {

                    document.getElementById('video-title').value = videoData.title;
                    document.getElementById('video-path').value = videoData.videoPath;
                    document.getElementById('video-description').value = videoData.description;


                    if (videoData.thumbnail) {
                        document.getElementById('video-thumbnail-preview').src = videoData.thumbnail;
                        document.getElementById('video-thumbnail-preview').style.display = 'block';
                        document.getElementById('video-thumbnail-label').classList.add('has-file');
                        document.getElementById('video-thumbnail-label').innerHTML = '‚úÖ Thumbnail loaded';
                    }


                    document.getElementById('videos-form').dataset.editId = id;


                    document.getElementById('videos-form').scrollIntoView({ behavior: 'smooth' });
                }
            } catch (error) {
                console.error('Error loading video for edit:', error);
                alert('Error loading video. Please try again.');
            }
        };


        window.deleteVideo = async function (id) {
            if (confirm('Are you sure you want to delete this video?')) {
                try {
                    await window.firestore.deleteDoc(window.firestore.doc(window.db, 'videos', id));
                    showStatus('videos-status', 'Video deleted successfully!');
                    await loadVideosData();
                } catch (error) {
                    console.error('Error deleting video:', error);
                    showStatus('videos-status', 'Error deleting video.', true);
                }
            }
        };

        async function loadAnalyticsData() {
            try {
                const totalDoc = await window.firestore.getDoc(window.firestore.doc(window.db, 'analytics', 'total'));
                if (totalDoc.exists()) {
                    const totalData = totalDoc.data();
                    document.getElementById('totalViews').textContent = totalData.totalPageViews || 0;
                }
                const today = new Date().toISOString().split('T')[0];
                const todayDoc = await window.firestore.getDoc(window.firestore.doc(window.db, 'analytics', `daily_${today}`));
                if (todayDoc.exists()) {
                    const todayData = todayDoc.data();
                    document.getElementById('todayVisitors').textContent = todayData.visitors || 0;
                }
                let weekVisitors = 0;
                const dailyStats = [];

                for (let i = 6; i >= 0; i--) {
                    const date = new Date();
                    date.setDate(date.getDate() - i);
                    const dateStr = date.toISOString().split('T')[0];

                    const dayDoc = await window.firestore.getDoc(window.firestore.doc(window.db, 'analytics', `daily_${dateStr}`));
                    if (dayDoc.exists()) {
                        const dayData = dayDoc.data();
                        weekVisitors += dayData.visitors || 0;
                        dailyStats.push({
                            date: dateStr,
                            visitors: dayData.visitors || 0,
                            displayDate: date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })
                        });
                    } else {
                        dailyStats.push({
                            date: dateStr,
                            visitors: 0,
                            displayDate: date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })
                        });
                    }
                }

                document.getElementById('thisWeekVisitors').textContent = weekVisitors;
                const dailyList = document.getElementById('dailyStatsList');
                dailyList.innerHTML = dailyStats.map(day =>
                    `<div style="display: flex; justify-content: space-between; padding: 0.5rem 0; border-bottom: 1px solid #e2e8f0;">
                <span>${day.displayDate}</span>
                <span style="font-weight: 600;">${day.visitors} visitors</span>
            </div>`
                ).join('');

            } catch (error) {
                console.error('Error loading analytics:', error);
                document.getElementById('dailyStatsList').innerHTML = '<p style="color: #e53e3e;">Error loading analytics data</p>';
            }
        }
    </script>
</body>

</html>